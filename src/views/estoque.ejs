<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <title>Estoque</title>
    <style>
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
         
        }

        ul {
          list-style: none;
          margin: 0;
          padding: 0;
          height: 100px;
          width: 45%;
          box-sizing: border-box;
          margin-bottom: 20px;
          
        }
      
        li {
            display: flex;
            flex-direction: row;
            margin-bottom: 20px;
            border: 1px solid #8a8a8abd;
            padding: 10px;
            justify-content: space-between;
            
         
          }
          
          li img {
            width: 70px;
            height: 70px;
            object-fit: contain;
            margin-right: 10px;
          }
          
          li h2 {
            font-size: 16px;
            margin: 0;
          }
          
          li p {
            margin: 0;
          }
          
          li form {
            display: flex;
            align-items: center;
          }
          
          li form button {
            margin-left: 10px;
            padding: 5px 10px;
            font-size: 14px;
          }
          
          li form:last-child button {
            background-color: #dc3545;
            color: white;
          }
          
          li form:last-child button:hover {
            background-color: #c82333;
          }
          .estoque{
            display: flex;
            flex-direction: column;
            
          }
          aside {
            margin-left: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            width: 150px;
          }
    
          aside ul {
            margin: 0;
            padding: 0;
          }
    
          aside li {
            margin-bottom: 10px;
          }
    
          aside a {
            display: block;
            padding: 5px;
          }
    
          aside a.active {
            background-color: #ddd;
            font-weight: bold;
          }
          main{
            display: flex;
            margin: 50px 0px 100px 30px;
           
          }
          .botoes{
            display: flex;
            margin-top: 15px;
          }
      </style>
      
  </head>

  <body>
    <%- include('partials/header') %>

    <main>
    <div class="estoque">
    <h1>Estoque</h1> 
    
        <a href="/product/create"> 
            <button class="action-button-create" >
                Criar novo item 
            </button>
                 </a>     
                 <aside>
                  <h2>Filtros</h2>
                  <ul>
                    <li><a href="#" data-type="all">Todos</a></li>
                    <li><a href="#" data-type="iphone">iPhone</a></li>
                    <li><a href="#" data-type="mac">Mac</a></li>
                    <li><a href="#" data-type="ipad">iPad</a></li>
                    <li><a href="#" data-type="watch">Watch</a></li>
                  </ul>
                </aside>
    </div>

    
    <div class="container">
      <% products.forEach(function(product) { %>
        <ul class="product-list" data-type="<%= product.type %>">
          <li>
            <a href="/product/detail/<%= product.id %>">
              <img src="<%= '/images/produtos/' + product.image %>" alt="<%= product.name %>">
            </a>
            <h2><%= product.name %></h2>
            <p>Pre√ßo: R$<%= toThousand(product.price) %></p>
            <div class="botoes">
            <form action="/product/update/<%= product.id %>" method="get">
              <input type="hidden" name="_method" value="PUT" />
              <button type="submit">Editar</button>
            </form>
            <form action="/product/<%= product.id %>?_method=DELETE" method="POST" style="display: inline-flex">
              <button type="submit" class="action-button-delete">Remover Produto</button>
            </form>
          </div>
          </li>
        </ul>
      <% }); %>
    </div>
  </main>
    <script>
      const filterLinks = document.querySelectorAll('aside a');
      const productLists = document.querySelectorAll('.product-list');
    
      // Adiciona um ouvinte de eventos para cada link de filtro
      filterLinks.forEach(link => {
        link.addEventListener('click', (event) => {
          event.preventDefault();
    
          const type = link.dataset.type;
    
          // Mostra ou oculta cada lista de produtos com base no tipo selecionado
          productLists.forEach(list => {
            if (type === 'all' || list.dataset.type === type) {
              list.style.display = 'block';
            } else {
              list.style.display = 'none';
            }
          });
        });
      });
    </script>
 
    <%- include('partials/footer') %>
  </body>
</html>
